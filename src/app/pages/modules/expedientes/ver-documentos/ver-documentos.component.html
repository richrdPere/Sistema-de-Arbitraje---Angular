<div class="p-6 min-h-full bg-base-300 text-base-content overflow-auto transition-colors duration-300">

  <!-- Link de regreso -->
  <a (click)="volver()" class="text-blue-600 hover:text-blue-800 flex items-center gap-2 mb-4">
    <i class="fa-solid fa-arrow-left"></i>
    Volver a Expedientes
  </a>


  <!-- Titulo -->
  <h1 class="text-2xl font-bold mb-5 text-base-content "> ðŸ“„ Documentos del expediente #{{ idExpediente }}</h1>

  <!-- Header -->
  <div class="flex flex-col md:flex-row md:justify-between md:items-center gap-4 py-4">

    <!--  BUSCADOR -->
    <div class="flex flex-col md:flex-row gap-4 items-center w-full md:w-auto">

      <!-- Select tipo ROL -->
      <!-- <select class="select select-bordered w-full md:w-60" [(ngModel)]="rolFiltro" (change)="onFiltroChange()">

        <option value="">TODOS</option>
        <option value="secretaria">SECRETARIA</option>
        <option value="arbitro">ARBITRO</option>
        <option value="adjudicador">ADJUDICADOR</option>
        <option value="admin">ADMINISTRADOR</option>
      </select> -->

      <!-- Input buscar -->
      <div class="relative w-full md:max-w-xs">
        <input type="text" class="input input-bordered w-full bg-base-100 rounded-md h-11 pl-10 pr-2 text-sm
                 focus:outline-none focus:ring-2 focus:ring-indigo-500" placeholder="Buscar por titulo"
          [(ngModel)]="search" (input)="onFiltroChange()" />
        <i class="fa fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
      </div>

    </div>
  </div>
  <!-- <div class="flex justify-between items-center mb-6">
    <h2 class="text-xl font-semibold mb-4">
      ðŸ“„ Documentos del expediente #{{ idExpediente }}
    </h2>

    <button class="btn btn-primary bg-[#0a1a35] hover:bg-[#13244a] border-none"
      (click)="abrirModalDocumento(idExpediente)">
      + Nuevo Documento
    </button>
  </div> -->


  <!-- Modal Subir documento -->
  <subir-documentos [mostrarModal]="mostrarModal" [expedienteId]="expedienteSeleccionadoId"
    (modalCerrado)="cerrarModalDocumento()" (documentoSubido)="cargarDocumentos()"></subir-documentos>

  <!-- Buscador -->
  <!-- <div class="flex justify-between items-center mb-4">
    <input type="text"
      class="input input-bordered w-full max-w-xs bg-base-100 text-white rounded-md h-11 pl-10 pr-4 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500"
      placeholder="Buscar por cualquier campo...">

  </div> -->

  <!-- Tabla de documentos -->
  <div class="p-6 bg-base-100 rounded-xl shadow-xl">

    <div class="overflow-x-auto text-base-content border border-base-300/90 shadow rounded-lg">

      <!-- Header acciones -->
      <div class="flex justify-between items-center p-5">

        <!-- Selector de cantidad -->
        <div class="flex items-center gap-2 text-sm">
          <label>Mostrar:</label>

          <select class="select select-bordered select-sm w-auto" [(ngModel)]="limit" (change)="cambiarLimite()">
            <option *ngFor="let size of pageSizeOptions" [ngValue]="size">
              {{ size }}
            </option>
          </select>

          <span>items por pÃ¡gina</span>
        </div>

        <!-- BotÃ³n -->
        <div>
          <button class="btn btn-primary text-base-content hover:text-white bg-info hover:bg-primary border-none"
            (click)="abrirModal()">
            <i class="fa-solid fa-plus mr-1"></i>
            Documento
          </button>
        </div>
      </div>


      @if (loading) {

      <div class="text-gray-500">Cargando documentos...</div>
      }


      @if (!loading && documentos.length === 0) {
      <div class="text-gray-400">
        No hay documentos registrados.
      </div>
      }


      @if (!loading && documentos.length > 0) {
      <div class="overflow-x-auto bg-white shadow rounded-lg ">
        <table class="table w-full">
          <thead class="bg-gray-100 text-gray-700">
            <tr>
              <th>ID</th>
              <th>Estado</th>
              <th>Fecha de Subida</th>
              <th>Titulo</th>
              <th>Tipo Documento</th>
              <th>Usuario</th>
              <th>AcciÃ³n</th>
            </tr>
          </thead>
          <tbody>

            @for (doc of documentos; track $index) {
            <tr>
              <td>{{ doc.id_documento }}</td>
              <td>{{ doc.estado }}</td>
              <td>{{ doc.createdAt | date: 'dd/MM/yyyy, h:mm a' }}</td>
              <td>{{ doc.titulo }}</td>
              <td>{{ doc.tipo_documento }}</td>
              <td>{{ doc.usuario_id }}</td>
              <td>
                <a [href]="doc.url_s3" target="_blank" class="text-blue-600 hover:underline">
                  Ver archivo
                </a>
              </td>
            </tr>
            }

          </tbody>
        </table>

      </div>

      }


    </div>
  </div>



</div>
