<!-- Tabla -->
<!-- <div class="bg-base-100 shadow rounded-lg border border-base-300 overflow-hidden">
</div> -->

<!--  BUSCADOR -->
<div class="p-4 mb-7 card bg-base-100 shadow-md">
  <div class="flex flex-col md:flex-row gap-4 items-center w-full md:w-auto">

    <!-- Filtro Tipo Arbitraje -->
    <select class="select select-bordered h-11 bg-base-100 text-base-content " [(ngModel)]="filtroTipo"
      (change)="aplicarFiltros()">
      <option value="">Todos los tipos</option>
      <option *ngFor="let t of tiposTramite" [value]="t">{{ t }}</option>
    </select>

    <!-- Input buscar -->
    <div class="relative w-full md:max-w-xs">
      <input type="text" class="input input-bordered w-full bg-base-100 rounded-md h-11 pl-10 pr-2 text-sm
                 focus:outline-none focus:ring-2 focus:ring-indigo-500" placeholder="Buscar..."
        [(ngModel)]="filtroSearch" (input)="aplicarFiltros()" />
      <i class="fa-solid fa-magnifying-glass absolute left-3 top-3 text-base-content/60"></i>
    </div>
  </div>
</div>

<!-- Tabla -->
<div class="p-6 min-h-auto bg-base-100 rounded-xl shadow-xl">

  <div class="overflow-x-auto overflow-y-auto h-[40vh] sm:max-h-[65vh] md:max-h-[60vh] lg:max-h-[65vh] xl:max-h-[70vh]">

    <!-- Header acciones -->
    <div class="flex justify-between items-center p-5">

      <!-- Selector de cantidad -->
      <div class="flex items-center gap-2 text-sm">
        <label>Mostrar:</label>

        <select class="select select-bordered select-sm w-auto" [(ngModel)]="limit" (change)="cambiarLimite()">
          <option *ngFor="let size of pageSizeOptions" [ngValue]="size">
            {{ size }}
          </option>
        </select>

        <span>items por página</span>
      </div>

      <!-- Botón -->
      <!-- <div>
        <button class="btn btn-primary text-base-content hover:text-white bg-info hover:bg-primary border-none"
          (click)="abrirModal()">
          <i class="fa-solid fa-plus mr-1"></i>
          Expediente
        </button>
      </div> -->

    </div>

    <!-- Tabla  -->
    <table class="table w-full">
      <thead class="bg-base-300 text-base-content">
        <tr>
          <th>#</th>
          <th>N° Expediente</th>
          <th>Tipo</th>
          <th>Estado</th>
          <th>Etapa</th>
          <th>Solicitante</th>
          <th>Correo</th>
          <th>Acciones</th>

        </tr>
      </thead>

      <tbody>

        <!-- LOADING -->
        @if (isLoading) {
        <tr>
          <td colspan="8" class="text-center py-6">
            <span class="loading loading-spinner loading-md"></span>
            <p class="mt-2">Cargando solicitudes...</p>
          </td>
        </tr>
        }

        <!-- SIN DATOS -->
        @else if (!isLoading && solicitudesRechazados.length === 0) {
        <tr>
          <td colspan="8" class="text-center py-10">
            <div class="flex flex-col items-center justify-center text-base-content/70">
              <img src="assets/img/empty-folder.png" alt="Sin solicitudes" class="w-32 h-32 mb-4 opacity-70" />

              <h3 class="text-lg font-semibold mb-1">
                No hay solicitudes no admitidas
              </h3>

              <p class="text-sm">
                Cuando existan solicitudes rechazadas aparecerán aquí.
              </p>
            </div>
          </td>
        </tr>
        }

        <!-- CON DATOS -->
        @else {
        @for (solicitud of solicitudesRechazados; track $index) {
        <tr class="hover transition-colors text-base-content">
          <td>{{ $index + 1 }}</td>
          <td class="font-medium text-primary">{{ solicitud.numero_expediente }}</td>
          <td>{{ solicitud.tipo }}</td>
          <td>{{ solicitud.estado }}</td>
          <td>{{ solicitud.etapa_procesal }}</td>
          <td>{{ solicitud.solicitante }}</td>
          <td>{{ solicitud.correo }}</td>
          <td>
            <!-- Acciones aquí -->
          </td>
        </tr>
        }
        }


      </tbody>
    </table>
  </div>

  <!-- Paginación -->
  <div class="flex justify-end items-center p-4 bg-base-300/90 text-sm">
    <span>
      Página {{ page }} de {{ totalPages }} registros
    </span>

    <div class="join ml-4 gap-2">
      <button class="join-item btn btn-sm" [disabled]="page === 1" (click)="cambiarPagina(page - 1)">
        Anterior
      </button>

      <button class="join-item btn btn-sm" [disabled]="page === totalItems" (click)="cambiarPagina(page + 1)">
        Siguiente
      </button>
    </div>
  </div>
</div>
