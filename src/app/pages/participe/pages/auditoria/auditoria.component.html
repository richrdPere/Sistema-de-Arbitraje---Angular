<div class="p-6 bg-gray-50 min-h-screen">

  <!-- Header -->
  <div class="flex justify-between items-center mb-6">
    <h2 class="text-2xl font-bold text-gray-800">Auditoría de Actividades</h2>
  </div>

  <!-- Formulario de registro -->
  <div class="bg-white p-4 rounded-lg shadow mb-6">
    <h3 class="text-lg font-semibold mb-3">Registrar nueva acción</h3>

    <div class="flex gap-3">
      <input type="text" (ngModel)="nuevaAccion" placeholder="Ejemplo: Consultó expediente 009-2025"
        class="input input-bordered w-full bg-base-100 text-gray-800 h-11 rounded-md" />

      <button class="btn bg-[#0a1a35] hover:bg-[#13244a] text-white border-none" (click)="registrarAccion()">
        Registrar
      </button>
    </div>
  </div>

  <!-- Tabla de auditorías -->
  <div class="overflow-x-auto bg-white shadow rounded-lg">
    <table class="table w-full">
      <thead class="bg-gray-100 text-gray-700">
        <tr>
          <th>ID</th>
          <th>Usuario</th>
          <th>Acción</th>
          <th>Fecha</th>
        </tr>
      </thead>

      <tbody>
        @if (loading) {
        <tr>
          <td colspan="4" class="text-center py-4">Cargando historial...</td>
        </tr>
        }

        @for (a of auditorias; track $index) {
        <tr>
          <td>{{ a.id_auditoria }}</td>
          <td>{{ a.usuario }}</td>
          <td>{{ a.accion }}</td>
          <td>{{ formatearFecha(a.fecha) }}</td>
        </tr>
        }

        @if (!loading && auditorias.length === 0) {
        <tr>
          <td colspan="4" class="text-center py-4 text-gray-500">
            No hay acciones registradas
          </td>
        </tr>
        }

      </tbody>
    </table>
  </div>
</div>
